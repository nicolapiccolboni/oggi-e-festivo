<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Supermercati aperti oggi? Risposta immediata</title>

  <meta name="description" content="Scopri subito se i supermercati sono aperti oggi in Italia. Risposta rapida e chiara, con nota su domeniche e festivi.">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#0f0f10">

  <style>
    body { margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; background:#0f0f10; color:#fff; }
    .wrap { min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px; }
    .card { max-width:560px; width:100%; background:#18181b; border-radius:16px; padding:24px; box-shadow:0 10px 30px rgba(0,0,0,.4); }
    h1 { margin:0 0 12px 0; font-size:22px; opacity:.92; }
    .date { font-size:14px; opacity:.7; margin-bottom:22px; }
    .answer { font-size:84px; font-weight:850; line-height:1; margin:10px 0 10px; }
    .detail { font-size:18px; opacity:.88; line-height:1.35; }
    .note { margin-top:22px; font-size:13px; opacity:.62; line-height:1.45; }
    .pillrow { margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; }
    .pill { padding:10px 12px; border-radius:999px; background:rgba(255,255,255,.06); font-size:13px; opacity:.9; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>Supermercati aperti oggi?</h1>
      <div class="date" id="date"></div>

      <div class="answer" id="answer">—</div>
      <div class="detail" id="detail"></div>

      <div class="pillrow">
        <div class="pill" id="pillDay">Giorno: —</div>
        <div class="pill" id="pillHoliday">Festivo: —</div>
      </div>

      <div class="note" id="note">
        Nota: gli orari variano per catena e città. Nei festivi e la domenica spesso ci sono aperture ridotte o chiusure.
      </div>
    </div>
  </div>

<script>
  const today = new Date();

  const days = ["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"];
  const months = ["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"];

  function formatDate(d) {
    return `${days[d.getDay()]} ${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
  }
  function pad(n) { return n < 10 ? "0" + n : n; }
  function iso(d) { return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`; }

  // Pasqua (algoritmo standard)
  function easter(year) {
    const f = Math.floor;
    const a = year % 19;
    const b = f(year / 100);
    const c = year % 100;
    const d = f(b / 4);
    const e = b % 4;
    const g = f((8 * b + 13) / 25);
    const h = (19 * a + b - d - g + 15) % 30;
    const i = f(c / 4);
    const k = c % 4;
    const l = (32 + 2 * e + 2 * i - h - k) % 7;
    const m = f((a + 11 * h + 22 * l) / 451);
    const month = f((h + l - 7 * m + 114) / 31);
    const day = ((h + l - 7 * m + 114) % 31) + 1;
    return new Date(year, month - 1, day);
  }

  function italianHolidays(year) {
    const map = {};
    map[`${year}-01-01`] = "Capodanno";
    map[`${year}-01-06`] = "Epifania";
    map[`${year}-04-25`] = "Festa della Liberazione";
    map[`${year}-05-01`] = "Festa dei Lavoratori";
    map[`${year}-06-02`] = "Festa della Repubblica";
    map[`${year}-08-15`] = "Ferragosto";
    map[`${year}-11-01`] = "Ognissanti";
    map[`${year}-12-08`] = "Immacolata Concezione";
    map[`${year}-12-25`] = "Natale";
    map[`${year}-12-26`] = "Santo Stefano";

    const e = easter(year);
    const em = new Date(e);
    em.setDate(e.getDate() + 1);

    map[iso(e)] = "Pasqua";
    map[iso(em)] = "Lunedì dell’Angelo";
    return map;
  }

  const dateEl = document.getElementById("date");
  const answerEl = document.getElementById("answer");
  const detailEl = document.getElementById("detail");
  const pillDay = document.getElementById("pillDay");
  const pillHoliday = document.getElementById("pillHoliday");

  dateEl.textContent = formatDate(today);
  pillDay.textContent = `Giorno: ${days[today.getDay()]}`;

  const holidays = italianHolidays(today.getFullYear());
  const key = iso(today);

  const isSunday = today.getDay() === 0;
  const isNationalHoliday = !!holidays[key];

  pillHoliday.textContent = isNationalHoliday ? `Festivo: SÌ (${holidays[key]})` : "Festivo: NO";

  // Logica risposta (onesta e binaria)
  // - Giorno feriale: in genere SÌ
  // - Domenica: dipende (molti aperti con orari ridotti, ma non tutti)
  // - Festivo nazionale: dipende / spesso ridotto
  if (isNationalHoliday || isSunday) {
    answerEl.textContent = "DIPENDE";
    detailEl.textContent = isNationalHoliday
      ? `Oggi è ${holidays[key]}. Molti supermercati sono chiusi o hanno orari ridotti (spesso mattino).`
      : "Oggi è domenica. Alcuni supermercati sono aperti (spesso con orari ridotti), altri no.";
  } else {
    answerEl.textContent = "SÌ";
    detailEl.textContent = "Oggi è un giorno lavorativo: in genere i supermercati sono aperti (con orari normali).";
  }
</script>
</body>
</html>
